<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>QP-nano: QP-nano Revision History</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.4 -->
<div class="tabs">
  <ul>
    <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul>
</div>
<h1><a class="anchor" name="rev_page">QP-nano Revision History </a></h1><h2><a class="anchor" name="qpn_4_0_04">
Version 4.0.04 (Product) Release date: Apr 09, 2009</a></h2>
The maintenance release provides a fix for the compile-time assertions, which did not work correctly for the GNU compiler family. Also, the ARM Cortex-M3 examples have been recompiled with the newer IAR EWARM v5.30.<p>
This maintenance release does not change the QP-nano API in any way, so the release has NO IMPACT on the QP-nano applications.<p>
The main changes in QP v4.0.04 with respect to earlier version are as follows:<p>
<ul>
<li>in <a class="el" href="qassert_8h.html" title="Customizable assertions.">qassert.h</a> file the <a class="el" href="qassert_8h.html#17f551ed8492f013d533f27353c091a3">Q_ASSERT_COMPILE</a> macro has been modified to render a negatuive array dimension when the asserted condition is not TRUE.</li></ul>
<h2><a class="anchor" name="qpn_4_0_03">
Version 4.0.03 (Product)</a></h2>
Release date: August 06, 2008<p>
The main purpose of this release is to "future-proof" the QK-nano preemptive kernel. The release 4.0.03 strictly preserves the semantics of QK_currPrio_ variable, which was violated by the previous QK mutex implementation. The mutex locking now uses a different variable QK_ceilingPrio_, which represents the ceiling-priority locked by the mutex. When the mutex is configured (the macro QK_MUTEX is defined), the QK-nano scheduler performs an additional check to make sure that only tasks with priorities above the ceiling can run. This additional overhead is not present when QK_MUTEX is not defined.<p>
This maintenance release does not change the QP-nano API in any way, so the release has NO IMPACT on the QP-nano applications.<p>
The main changes in QP v4.0.03 with respect to earlier version are as follows:<p>
<ul>
<li>in <a class="el" href="qkn_8c.html">qkn.c</a> file, changed priority-ceiling mutex implementation to use the QK_ceilingPrio_ instead of QK_currPrio_. Also added testing priority against the QK_ceilingPrio_, when the macro QK_MUTEX is defined.</li></ul>
<h2><a class="anchor" name="qpn_4_0_02">
Version 4.0.02 (Product) Release date: August 06, 2008</a></h2>
This maintenace release is made to allow posting events from any active object to any active object from the top-most initial transtions.<p>
This maintenance release does not change the QP-nano API in any way, so the release has NO IMPACT on the QP-nano applications.<p>
The main changes in QP v4.0.02 with respect to earlier version are as follows:<p>
<ul>
<li>modified function <a class="el" href="qfn_8h.html#7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run()</a> in <a class="el" href="qfn_8c.html">qfn.c</a> to first loop over all active objects and initialize their priority attribute based on their location in the QF_active[] array. The second for-loop triggers only the initial transitions, but now all priorities are initialized, so active objects can post events to each others from the initial transiitons.</li><li>modified function <a class="el" href="qfn_8h.html#7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run()</a> in <a class="el" href="qkn_8c.html">qkn.c</a> in identical way as in <a class="el" href="qfn_8c.html">qfn.c</a> described above.</li></ul>
<h2><a class="anchor" name="qpn_4_0_01">
Version 4.0.01 (Product) Release date: June 08, 2008</a></h2>
This maintenace release is made to allow compiling QP-nano with the GNU compiler for AVR (WinAVR). Specifically, some changes were necessary to accomodate the non-standard way of hanlding constant data objects allocated in ROM (PROGMEM) in the GNU compiler for AVR.<p>
This maintenance release does not change the QP-nano API in any way, so the release has NO IMPACT on the QP-nano applications.<p>
The main changes in QP v4.0.01 with respect to earlier version are as follows:<p>
<ul>
<li>eliminated QF_pCB_ variable from <a class="el" href="qfn_8c.html">qfn.c</a> and <a class="el" href="qkn_8c.html">qkn.c</a>. This variable was used to point to the constant active object control block (<a class="el" href="struct_q_active_c_b.html" title="QActive Control Block.">QActiveCB</a>) in ROM. The GNU compliler for AVR could not handle such pointer correctly without contaminating the code with non-portable and non-standard extensions.</li></ul>
<p>
<ul>
<li>added Doxygen comments to the qep.h header file.</li></ul>
<p>
<ul>
<li>in <a class="el" href="qepn_8c.html">qepn.c</a> file, broken up expressions of the form if (t == path[iq]) ... into (s = path[iq]; if (t == s) ...). This was done to accommodate the ImageCraft ICCM8C compiler for PSoC.</li></ul>
<h2><a class="anchor" name="qpn_4_0_00">
Version 4.0.00 (Product)</a></h2>
Release date: Apr 07, 2008<p>
This milestone release is made for the book <a class="el" href="index.html#PSiCC2">Practical UML Statecharts in C/C++, Second Edition</a>. The book describes in great detail this new release. The older "QP-nano Programmer's Manual" is now phased out and is replaced with this hyper-lirenked <a class="el" href="index.html#main_page">QP-nano Reference Manual</a>, which provides very detailed, easily searchable reference to the software. The book <a class="el" href="index.html#PSiCC2">Practical UML Statecharts in C/C++, Second Edition</a> provies in-depth discussion of the relevant concepts as well as the design study of QP v4.0, including QP-nano v4.0 in Chapter 12.<p>
The main changes in QP v4.0 with respect to earlier versions are as follows:<p>
<ul>
<li>the coding techniques for hierarchical state machines (HSMs) and the simpler finite state machines (FSMs) have changed. While the changes are quite simple, the backward compatibility with QEP-nano 3.x has been broken, meaning that some manual changes to the state machines implemented with earlier versions are necessary. Please refer to the "QP-nano Tutorial" Section <a class="el" href="coding_hsm.html">7. Coding Hierarchical State Machines</a> for more information about coding state machines with QEP 4.x.<ul>
<li>The main change is the signature of a state-handler function, which now returns simply a byte. This return type (typedef'ed as QState) is the status of the event-handling that the state handler conveys to the QEP event processor.</li><li>The macro <a class="el" href="qepn_8h.html#8f06cd90ba5060780fc61a4810e3eb50" title="Designates a target for an initial or regular transition. Q_TRAN() can be used both...">Q_TRAN()</a> must now always follow the return statement.</li><li>The new macro <a class="el" href="qepn_8h.html#d8abd2f7098c41ec464343d9d8f1eadc" title="Designates the superstate of a given state in an HSM.">Q_SUPER()</a> designates the superstate of the given state. Again, this macro must follow the return statement.</li><li>Then two new macros <a class="el" href="qepn_8h.html#54b2da5e70ef983cfa7ca74deac237a3" title="Value returned by a state-handler function when it handles the event.">Q_HANDLED()</a> and <a class="el" href="qepn_8h.html#4b1bc93dc610e97650f324dc7901cd86" title="The macro returned from a non-hierarchical state-handler function when it ignores...">Q_IGNORED()</a> have been added to return the status of event handled and event ignored, respectively.</li></ul>
</li></ul>
<p>
<ul>
<li>all callback functions are now consistently called <code>XXX_onYYY()</code>:<ul>
<li>Q_assert_handler() is now <a class="el" href="qassert_8h.html#4b763b7acf73342465ab91d5752f1b14">Q_onAssert()</a></li><li>QF_start() is now <a class="el" href="qfn_8h.html#189a6d2ece787717c81fbf51fd180732" title="Startup QF-nano callback.">QF_onStartup()</a></li><li>QF_cleanup() is now QF_onCleanup()</li></ul>
</li></ul>
<p>
<ul>
<li>all callback functions are now consistently called <code>XXX_onYYY()</code>:<ul>
<li>Q_assert_handler() is now <a class="el" href="qassert_8h.html#4b763b7acf73342465ab91d5752f1b14">Q_onAssert()</a></li><li>QF_start() is now <a class="el" href="qfn_8h.html#189a6d2ece787717c81fbf51fd180732" title="Startup QF-nano callback.">QF_onStartup()</a></li><li>QF_cleanup() is now QF_onCleanup()</li></ul>
</li><li>enumerating global active object priorities is no longer necessary.</li><li>the methods of posting events have changed:<ul>
<li>QF_post(prio, sig, par) is now void QActive_post(me, sig, par)</li><li>QF_postISR(prio, sig, par) is now void QActive_postISR(me, sig, par)</li></ul>
</li><li>the global variable QF_activeNum has been eliminated<ul>
<li>instead the constant <a class="el" href="qpn__port_8h.html#776d2a032974db4bf9bcfde01ace1389" title="The maximum number of active objects in the application.">QF_MAX_ACTIVE</a> <b>must</b> correspond to the exact number of active objects in the application.</li></ul>
</li><li>the QEP-nano event processor now works identically as the full-version QEP. Specifically, the signal of the current event is not used to notify the event processor that a transition has taken place. This saves a few bytes of code for every usage of <a class="el" href="qepn_8h.html#8f06cd90ba5060780fc61a4810e3eb50" title="Designates a target for an initial or regular transition. Q_TRAN() can be used both...">Q_TRAN()</a>.</li><li>all QF-nano and QK-nano functions have been modified to use static variables instead of stack variables wherever possible. This saves a few bytes of stack for the "vanilla" kernel. In QK-nano the savings can be more substantial.</li><li>the QP-nano event queues now decrement the head and tail counters. This leads to wrap-around at zero, which is easier (faster) to test than any other wrap-around point.</li><li>all examples in the standard QP-nano distribution have been cleaned up and updated to the latest QP-nano API changes.</li></ul>
<h2><a class="anchor" name="qpn_3_4_01">
Version 3.4.01 (Product)</a></h2>
Release date: Sep 25, 2007<p>
This product release adds the backward-compatibility layer so that previous QP-nano ports continue to work with the new version.<p>
This product release also comes with the updated "QP-nano Programmer's Manual" that now includes the QK-nano preemptive kernel.<h2><a class="anchor" name="qpn_3_4_00">
Version 3.4.00 (Beta)</a></h2>
Release date: Sep 03, 2007<p>
This release brings several changes with the overall goal of simplifying and improving consistency across the whole QP family of frameworks (QP/C, QP/C++, and QP-nano).<p>
This release includes simplifying of the C naming conventions (see the updated Application Note <a href="http://www.state-machine.com/doc/AN_QL_Coding_Standard.pdf">"QL C/C++ Coding Standard"</a>). The double-underscore suffix for private data members of structures is no longer used. Single underscore is used still only for internal QP-nano facilities that typically should not be used by the application programmer.<p>
The main changes are made to the QEP-nano component. The new functions <a class="el" href="qepn_8h.html#3a75c05854f09fb68221ececa9620f60" title="Initializes a FSM.">QFsm_init()</a> and <a class="el" href="qepn_8h.html#25ff9e701419154624f3c7cfc175dbb0" title="Initializes a HSM.">QHsm_init()</a> have been added for FSMs and HSMs, respectively. These APIs are for initializing a state machine by triggering the top-most initial transition. The application programmer now needs to provide the top-most initial *pseudostate* that defines the initial transition, just like it is done in QP/C and QP/C++.<p>
NOTE: the previous QP-nano technique of providing the whole top-most initial state handler will still work, but it takes more code and is not recommended in the future designs.<p>
The other big change in this release is including the QK-nano component in the distribution. Previously, the QK-nano component was available only under the commercial licensing. It is now open source, just as the rest of QP-nano.<h2><a class="anchor" name="qpn_1_5_07">
Version 1.5.07 (Product)</a></h2>
Release date: Mar 08, 2007<br>
<p>
The only change in this release is removing the 'const' declaration of a temporary variable inside <a class="el" href="qepn_8h.html#5ae42e7a6a93dc8a5354abdc99d67902" title="Dispatches an event to a HSM.">QHsm_dispatch()</a> function. This was necessary to compile the code with the MPLAB C18 compiler for PIC18 devices. <br>
 The changes in release 1.5.07 have NO impact on the existing QP-nano ports.<br>
<p>
<ol type=1>
<li>in file <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a>, line 92 removed 'const' from the 'QHsmState src' declaration</li><li>in file <a class="el" href="qepn_8c.html">qepn.c</a> changed the version number to "1.5.07".</li></ol>
<h2><a class="anchor" name="qpn_1_5_06">
Version 1.5.06 (Product)</a></h2>
Release date: Jan 28, 2007<br>
<p>
The main change in this release is adding the macro <a class="el" href="qpn__port_8h.html#77f44dc116b167af2d807aacf9a4579f" title="Macro to specify compiler-specific directive for generating reentrant function.">Q_REENTRANT</a> for all functions that might be called from various threads of control (when the preemptive QK-nano is used). The macro <a class="el" href="qpn__port_8h.html#77f44dc116b167af2d807aacf9a4579f" title="Macro to specify compiler-specific directive for generating reentrant function.">Q_REENTRANT</a> is used in the postfix syntax, which is how the Keil C51 compiler uses the extended keyword "reentrant" to indicate reentrant functions.<br>
 <br>
 The changes in release 1.5.06 have NO impact on the existing QP-nano ports, because the empty default definition for the <a class="el" href="qpn__port_8h.html#77f44dc116b167af2d807aacf9a4579f" title="Macro to specify compiler-specific directive for generating reentrant function.">Q_REENTRANT</a> macro provided in "qeph.h" should be adequate for all these ports.<br>
<p>
<ol type=1>
<li>in file <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a> added default empty definitions and Doxygen comments for macros <a class="el" href="qpn__port_8h.html#77f44dc116b167af2d807aacf9a4579f" title="Macro to specify compiler-specific directive for generating reentrant function.">Q_REENTRANT</a>.</li><li>in file <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a> added macro <a class="el" href="qpn__port_8h.html#77f44dc116b167af2d807aacf9a4579f" title="Macro to specify compiler-specific directive for generating reentrant function.">Q_REENTRANT</a> to the signature of functions that must be reentrant</li><li>in file <a class="el" href="qfn_8h.html" title="Public QF-nano interface.">qfn.h</a> added macro <a class="el" href="qpn__port_8h.html#77f44dc116b167af2d807aacf9a4579f" title="Macro to specify compiler-specific directive for generating reentrant function.">Q_REENTRANT</a> to the signature of functions that must be reentrant</li><li>in file <a class="el" href="qkn_8h.html" title="Public QP-nano interface.">qkn.h</a> added macro <a class="el" href="qpn__port_8h.html#77f44dc116b167af2d807aacf9a4579f" title="Macro to specify compiler-specific directive for generating reentrant function.">Q_REENTRANT</a> to the signature of functions that must be reentrant</li><li>in file <a class="el" href="qepn_8c.html">qepn.c</a> added macro <a class="el" href="qpn__port_8h.html#77f44dc116b167af2d807aacf9a4579f" title="Macro to specify compiler-specific directive for generating reentrant function.">Q_REENTRANT</a> to the signature of functions that must be reentrant</li><li>in file <a class="el" href="qfn_8c.html">qfn.c</a> added macro <a class="el" href="qpn__port_8h.html#77f44dc116b167af2d807aacf9a4579f" title="Macro to specify compiler-specific directive for generating reentrant function.">Q_REENTRANT</a> to the signature of functions that must be reentrant</li><li>in file <a class="el" href="qkn_8c.html">qkn.c</a> added macro <a class="el" href="qpn__port_8h.html#77f44dc116b167af2d807aacf9a4579f" title="Macro to specify compiler-specific directive for generating reentrant function.">Q_REENTRANT</a> to the signature of functions that must be reentrant</li><li>in file <a class="el" href="qepn_8c.html">qepn.c</a> changed the copyright notice and the version number to "1.5.06".</li></ol>
<h2><a class="anchor" name="qpn_1_5_05">
Version 1.5.05 (Product)</a></h2>
Release date: Dec 13, 2006<br>
<p>
The main change in this release is adding the macro <a class="el" href="qpn__port_8h.html#c4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM...">Q_ROM_VAR</a> for all constant objects allocated in ROM. The <a class="el" href="qpn__port_8h.html#c4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM...">Q_ROM_VAR</a> macro has been added for the compilers like Freescale HC(S)08, which require far pointers to access the objects in ROM. Please note that specifying the pointer size for accessing a ROM objects is syntactically different than specifying that the object is allocated in ROM (see macro <a class="el" href="qpn__port_8h.html#4f4cc7253c4d809b326498b40efd66d3" title="Macro to specify compiler-specific directive for placing a constant object in ROM...">Q_ROM</a>).<br>
<p>
The changes in release 1.5.05 have NO impact on the existing QP-nano ports, because the empty default definition for the <a class="el" href="qpn__port_8h.html#c4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM...">Q_ROM_VAR</a> macro should be adequate for all these ports.<br>
<p>
<ol type=1>
<li>in file <a class="el" href="qassert_8h.html" title="Customizable assertions.">qassert.h</a> added macro <a class="el" href="qpn__port_8h.html#c4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM...">Q_ROM_VAR</a> for objects allocated in ROM and to signatures of functions accessing these objects.</li><li>in file <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a> added macro <a class="el" href="qpn__port_8h.html#c4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM...">Q_ROM_VAR</a> for objects allocated in ROM and to signatures of functions accessing these objects.</li><li>in file <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a> added default empty definitions and Doxygen comments for macros <a class="el" href="qpn__port_8h.html#4f4cc7253c4d809b326498b40efd66d3" title="Macro to specify compiler-specific directive for placing a constant object in ROM...">Q_ROM</a> and <a class="el" href="qpn__port_8h.html#c4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM...">Q_ROM_VAR</a>.</li><li>in file <a class="el" href="qfn_8h.html" title="Public QF-nano interface.">qfn.h</a> added macro <a class="el" href="qpn__port_8h.html#c4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM...">Q_ROM_VAR</a> for objects allocated in ROM and to signatures of functions accessing these objects.</li><li>in file <a class="el" href="qepn_8c.html">qepn.c</a> added macro <a class="el" href="qpn__port_8h.html#c4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM...">Q_ROM_VAR</a> for objects allocated in ROM and to signatures of functions accessing these objects.</li><li>in file <a class="el" href="qfn_8c.html">qfn.c</a> added macro <a class="el" href="qpn__port_8h.html#c4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM...">Q_ROM_VAR</a> for objects allocated in ROM and to signatures of functions accessing these objects.</li><li>in file <a class="el" href="qkn_8c.html">qkn.c</a> added macro <a class="el" href="qpn__port_8h.html#c4b8d7dd267fd787a004ad9b58ec2283" title="Macro to specify compiler-specific directive for accessing a constant object in ROM...">Q_ROM_VAR</a> for objects allocated in ROM and to signatures of functions accessing these objects.</li><li>in file <a class="el" href="qepn_8c.html">qepn.c</a> changed the copyright notice and the version number to "1.5.05".</li></ol>
<h2><a class="anchor" name="qpn_1_5_04">
Version 1.5.04 (Product)</a></h2>
Release date: Dec 11, 2006<br>
<p>
The main change in this release is removing "#include &lt;stdint.h&gt;" from the <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a> header file. This has been done becasue vast majority of embedded compilers for small MCUs actually do not provide the C-99 Standard header file &lt;stdint.h&gt;. Worse, compilers such as Freescale HC(S)08 C/C++ compiler will not include &lt;stdint.h&gt; unless it's in the compilers's include directory, even though the stdint.h file might be in the compiler include path.<br>
 <br>
 Removing the "#include &lt;stdint.h&gt;" from qep.h header file allows more flexibility in the way the standard exact-width integer types are defined. For compilers that do not provide the &lt;stdint.h&gt; file, you provide the typedef's in the <a class="el" href="qpn__port_8h.html" title="QP-nano port.">qpn_port.h</a> file before including <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a>. For compilers that do provide the &lt;stdint.h&gt; header file, you simply include this file in the <a class="el" href="qpn__port_8h.html" title="QP-nano port.">qpn_port.h</a> header file before including <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a>. <br>
 The changes in release 1.5.04 have impact on all QP-nano ports, because you need to modify the <a class="el" href="qpn__port_8h.html" title="QP-nano port.">qpn_port.h</a> file in all these ports.<br>
<p>
<ol type=1>
<li>in file <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a> removed "#include &lt;stdint.h&gt;".</li><li>in file <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a> fixed incorrect macros QFsm_getState() and QHsm_getState() to get the current state of the state machine.</li><li>in file <a class="el" href="qfn_8h.html" title="Public QF-nano interface.">qfn.h</a> changed the copyright notice.</li><li>in file <a class="el" href="qkn_8c.html">qkn.c</a> changed the copyright notice.</li><li>in file <a class="el" href="qepn_8c.html">qepn.c</a> changed the copyright notice and the version number to "1.5.04".</li></ol>
<h2><a class="anchor" name="qpn_1_5_03">
Version 1.5.03 (Product)</a></h2>
Release date: Nov 12, 2006<br>
<p>
This release adapts the QP-nano code to the shortcomings of the gcc compiler for handling data in program ROM for Harvard architecture CPUs, such as the Atmel's AVR or the 8051. In such machines, the data space (RAM) and program space (ROM) are accessed with different instructions. The gcc compiler does not automatically synthesize the correct code for accessing data placed in the program ROM, even though the __attribute__((__progmem__)) is used. The workaround for the gcc is to add special assembly instructions to transfer the data from the program space to the data space. This version of QP-nano adds macros for each data element allocated to the program space (delcared with the Q_ROM attribute).<br>
 <br>
 Please note that commercial compilers, such as IAR, handle data allocated in the program space (ROM) correctly and do not need any workarounds.<p>
<ol type=1>
<li>in file <a class="el" href="qepn_8c.html">qepn.c</a> changed the version number to "1.5.03".</li><li>in file <a class="el" href="qfn_8c.html">qfn.c</a> added the <a class="el" href="qpn__port_8h.html#abc3bb6d854fe3a71937f0a09764f8f7" title="Macro to access a byte allocated in ROM.">Q_ROM_BYTE()</a> and <a class="el" href="qpn__port_8h.html#4fa2969ab20fd9510637d9ac4e662698" title="Macro to access a pointer allocated in ROM.">Q_ROM_PTR()</a> macros around each data element allocated to the program space (declared with Q_ROM attribute).</li><li>in file <a class="el" href="qkn_8c.html">qkn.c</a> added the <a class="el" href="qpn__port_8h.html#abc3bb6d854fe3a71937f0a09764f8f7" title="Macro to access a byte allocated in ROM.">Q_ROM_BYTE()</a> and <a class="el" href="qpn__port_8h.html#4fa2969ab20fd9510637d9ac4e662698" title="Macro to access a pointer allocated in ROM.">Q_ROM_PTR()</a> macros around each data element allocated to the program space (declared with Q_ROM attribute).</li></ol>
<h2><a class="anchor" name="qpn_1_5_02">
Version 1.5.02 (Product)</a></h2>
Release date: Nov 04, 2006<br>
<p>
This release corrects the initial transition processing in the QK-nano configuration. Also, a new interrupt locking policy inside interrups is introduced (inside the QF_postISR() function). This locking policy corresponds to "saving and restoring interrupt status", which is useful to unlock interrupts only to a certain level, but keep the interrupts locked below that level.<p>
<ol type=1>
<li>in file <a class="el" href="qepn_8c.html">qepn.c</a> changed the version number to "1.5.02".</li><li>in file <a class="el" href="qfn_8h.html" title="Public QF-nano interface.">qfn.h</a> added doxygen comment to QF_readySet_.</li><li>in file <a class="el" href="qkn_8c.html">qkn.c</a> moved the setting of QF_readySet_ before the call to QK_schedule.</li><li>in file <a class="el" href="qfn_8c.html">qfn.c</a> introduced macros QF_ISR_KEY_TYPE and QF_ISR_LOCK()/ QF_ISR_UNLOCK().</li><li>updated the "QP-nano Programmer's Manual"</li></ol>
<h2><a class="anchor" name="qpn_1_5_01">
Version 1.5.01 (Product)</a></h2>
Release date: Oct 16, 2006<br>
<p>
This release makes no changes to the core QP-nano code, but corrects nested interrupt handling in the 80x86 example of PELICAN crossing with QK-nano. Additionally, alternative interrupt handling without allowing the interrupt nesting is demonstrated.<p>
<ol type=1>
<li>in file <a class="el" href="qepn_8c.html">qepn.c</a> changed the version number to "1.5.01".</li><li>in file examples/80x86/tcpp101/pelican-qk/bsp.c corrected the tick ISR and added another option for the case when interrupt nesting is not allowed. Also added note comments at the end of the file.</li><li>in file examples/80x86/tcpp101/pelican/bsp.c added an optional implementation of the tick ISR for the case when interrupt nesting is allowed. Also added note comments at the end of the file.</li><li>updated the "QP-nano Programmer's Manual"</li></ol>
<h2><a class="anchor" name="qpn_1_5_00">
Version 1.5.00 (Product)</a></h2>
Release date: Sep 17, 2006<br>
<p>
This release changes the licensing of QP-nano. The QEP-nano and QF-nano components are released under the dual-license (GPL and commercial). The QK-nano component is left as commercial only.<p>
To enable the separate use of QEP-nano, QF-nano, and QK-nano, the header file qpn.h has been split into three files <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a>, <a class="el" href="qfn_8h.html" title="Public QF-nano interface.">qfn.h</a>, and <a class="el" href="qkn_8h.html" title="Public QP-nano interface.">qkn.h</a>.<p>
<ol type=1>
<li>deleted header file qpn.h</li><li>added header file <a class="el" href="qepn_8h.html" title="Public QEP-nano interface.">qepn.h</a></li><li>added header file <a class="el" href="qfn_8h.html" title="Public QF-nano interface.">qfn.h</a></li><li>added header file <a class="el" href="qkn_8h.html" title="Public QP-nano interface.">qkn.h</a></li><li>in file <a class="el" href="qkn_8h.html" title="Public QP-nano interface.">qkn.h</a> added definition of the macro QK_PREEMPTIVE, so that including this <a class="el" href="qkn_8h.html" title="Public QP-nano interface.">qkn.h</a> in <a class="el" href="qpn__port_8h.html" title="QP-nano port.">qpn_port.h</a> automatically configures QK-nano.</li><li>in file <a class="el" href="qkn_8c.html">qkn.c</a> added compilation error to check that QK_PREEMTIVE is indeed defined (meaning that <a class="el" href="qkn_8h.html" title="Public QP-nano interface.">qkn.h</a> has been included in <a class="el" href="qpn__port_8h.html" title="QP-nano port.">qpn_port.h</a>)</li><li>consistently changed copyright notes in the QP-nano examples without QK-nano to relfect open-source (GPL) licensing.</li><li>updated the "QP-nano Programmer's Manual"</li></ol>
<h2><a class="anchor" name="qpn_1_4_00">
Version 1.4.00 (Product)</a></h2>
Release date: Aug 20, 2006<br>
<p>
This release addresses the potential initialization problem, when active objects want to post events to each other or to self during the top-most initial transition.<p>
The initialization sequence now requires only calling the <a class="el" href="qfn_8h.html#7ddf2dd243b2bc13589a9c7d22f0e253" title="Active object constructor.">QActive_ctor()</a> constructor, but you no longer need to explicitly call <a class="el" href="qepn_8h.html#25ff9e701419154624f3c7cfc175dbb0" title="Initializes a HSM.">QHsm_init()</a> (or <a class="el" href="qepn_8h.html#3a75c05854f09fb68221ececa9620f60" title="Initializes a FSM.">QFsm_init()</a> for the non-hierarchical state machine) to trigger the top-most initial transition. The top-most initial transition is now executed automatically by the framework.<p>
<ol type=1>
<li>in file qpn.h added <a class="el" href="qepn_8h.html#d66297c5cd81f3cadc5b4dafc8f11f8c" title="State machine constructor.">QFsm_ctor()</a>, <a class="el" href="qepn_8h.html#8b773acc2e243ce416869ab83ee5679c" title="State machine constructor.">QHsm_ctor()</a>, and <a class="el" href="qfn_8h.html#7ddf2dd243b2bc13589a9c7d22f0e253" title="Active object constructor.">QActive_ctor()</a>.</li><li>in file qpn.h removed <a class="el" href="qepn_8h.html#3a75c05854f09fb68221ececa9620f60" title="Initializes a FSM.">QFsm_init()</a> and <a class="el" href="qepn_8h.html#25ff9e701419154624f3c7cfc175dbb0" title="Initializes a HSM.">QHsm_init()</a>.</li><li>in file <a class="el" href="qepn_8c.html">qepn.c</a> changed <a class="el" href="qepn_8h.html#6fcf8eae867a71ce35a36c9a07b1e1cc" title="get the current QP version number string">QP_getVersion()</a> to allocate the version string in ROM (if possible) and incremented the version number to 1.4.00</li><li>in file <a class="el" href="qfn_8c.html">qfn.c</a> modified <a class="el" href="qfn_8h.html#7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run()</a> to initialize the QF_readySet_ to process the initialization event in all active objects.</li><li>in file <a class="el" href="qkn_8c.html">qkn.c</a> modified <a class="el" href="qfn_8h.html#7a41998117b4edb760b754f5ee3f61d5" title="Transfers control to QF to run the application.">QF_run()</a> to initialize the QF_readySet_ to process the initialization event in all active objects. Also commented out the inclusion of <a class="el" href="qassert_8h.html" title="Customizable assertions.">qassert.h</a>, which is currently not used in this module.</li><li>updated all examples and QDKs-nano to use the new initialization sequence.</li><li>updated the "QP-nano Programmer's Manual"</li></ol>
<p>
removed unlocking interrupts before invoking the <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a> callback. This was done to prevent a race condition in determining the idle condition. The idle condition (no events in any event queues) can be changed at any time by an interrupt. If interrupts were unlocked before calling <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a>, and interrupt could post an event to a queue, but the <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a> would put the CPU to low-power mode, thus preventing the processing of the event until the next interrupt.<br>
 <br>
 The modification changes the semantics and responsibilities of <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a>, which now MUST at least unlock interrupts. A failure to unlock interrupts in <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a> will leave the interrupts locked all the time and would prevent the application from running.<br>
<ol type=1>
<li>in file qpn.h changed the comments for <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a></li><li>in file qpn.h added new idle callback <a class="el" href="qkn_8h.html#667daad24b172e782fe4e2b5b06fbf61" title="QK idle callback (customized in BSPs for QK).">QK_onIdle()</a>, which in contrast to <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a> is invoked with interrupts unlocked.</li><li>in file qk.c replaced the callback <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a> with the new one <a class="el" href="qkn_8h.html#667daad24b172e782fe4e2b5b06fbf61" title="QK idle callback (customized in BSPs for QK).">QK_onIdle()</a>.</li><li>in file <a class="el" href="qepn_8c.html">qepn.c</a> changed the version number to 1.3.00</li></ol>
<h2><a class="anchor" name="qpn_1_3_00">
Version 1.3.00 (Product)</a></h2>
Release date: Jul 27, 2006<br>
<p>
<ol type=1>
<li>in file <a class="el" href="qfn_8c.html">qfn.c</a> removed unlocking interrupts before invoking the <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a> callback. This was done to prevent a race condition in determining the idle condition. The idle condition (no events in any event queues) can be changed at any time by an interrupt. If interrupts were unlocked before calling <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a>, and interrupt could post an event to a queue, but the <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a> would put the CPU to low-power mode, thus preventing the processing of the event until the next interrupt.<br>
 <br>
 The modification changes the semantics and responsibilities of <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a>, which now MUST at least unlock interrupts. A failure to unlock interrupts in <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a> will leave the interrupts locked all the time and would prevent the application from running.<br>
</li><li>in file qpn.h changed the comments for <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a></li><li>in file qpn.h added new idle callback <a class="el" href="qkn_8h.html#667daad24b172e782fe4e2b5b06fbf61" title="QK idle callback (customized in BSPs for QK).">QK_onIdle()</a>, which in contrast to <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a> is invoked with interrupts unlocked.</li><li>in file qk.c replaced the callback <a class="el" href="qfn_8h.html#fcac91c9d71d70255fdd88db3fb16e24" title="QF idle callback (customized in BSPs for QF).">QF_onIdle()</a> with the new one <a class="el" href="qkn_8h.html#667daad24b172e782fe4e2b5b06fbf61" title="QK idle callback (customized in BSPs for QK).">QK_onIdle()</a>.</li><li>in file <a class="el" href="qepn_8c.html">qepn.c</a> changed the version number to 1.3.00</li></ol>
<h2><a class="anchor" name="qpn_1_2_00">
Version 1.2.00 (Product)</a></h2>
Release date: May 31, 2006<br>
<p>
<ol type=1>
<li>added QK-nano component for preemptive multitasking option</li><li>used the eZ430-F2013 USB stick instead of 8051 SiLabs Toolstick in the examples</li><li>added QK-nano demonstration in the pelican-qk example for x86</li><li>updated "QP-nano Programmer's Manual"</li></ol>
<h2><a class="anchor" name="qpn_1_1_00">
Version 1.1.00 (Beta)</a></h2>
Release date: May 20, 2006<br>
<p>
<ol type=1>
<li>added "QP-nano Programmer's Manual"</li></ol>
<h2><a class="anchor" name="qpn_1_0_00">
Version 1.0.00 (Initial)</a></h2>
Release date: May 15, 2006<br>
<p>
<ol type=1>
<li>created </li></ol>
<hr size="1"><address style="text-align: right;"><small>Generated on Thu Apr 9 13:26:45 2009 for QP-nano by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.4 </small></address>
</body>
</html>
